'use client';

import Image from "next/image";
import Link from "next/link";
import { useEffect, useRef, useState } from "react";
import './psychologist-styles.css';

export default function Home() {
  const [scrollProgress, setScrollProgress] = useState(0);
  const sectionRefs = useRef([]);

  useEffect(() => {
    // Create scroll indicator
    const scrollIndicator = document.createElement('div');
    scrollIndicator.className = 'scroll-indicator';
    document.body.appendChild(scrollIndicator);

    // Handle scroll progress
    const handleScroll = () => {
      const totalHeight = document.body.scrollHeight - window.innerHeight;
      const progress = (window.scrollY / totalHeight) * 100;
      setScrollProgress(progress);
      scrollIndicator.style.width = `${progress}%`;

      // Add animation to sections when they come into view
      sectionRefs.current.forEach(section => {
        if (!section) return;
        const rect = section.getBoundingClientRect();
        const isInView = rect.top <= window.innerHeight * 0.75;
        if (isInView) {
          section.classList.add('animate-in');
        }
      });
    };

    // Add sparkle effect to emoji
    const addSparkleToEmojis = () => {
      document.querySelectorAll('h2').forEach(heading => {
        const text = heading.innerHTML;
        if (text.match(/[\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}]/u)) {
          const parts = text.split(/(<[^>]*>|[\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}])/u);
          const newText = parts.map((part, i) => {
            if (part.match(/[\u{1f300}-\u{1f5ff}\u{1f900}-\u{1f9ff}\u{1f600}-\u{1f64f}\u{1f680}-\u{1f6ff}\u{2600}-\u{26ff}\u{2700}-\u{27bf}\u{1f1e6}-\u{1f1ff}\u{1f191}-\u{1f251}\u{1f004}\u{1f0cf}\u{1f170}-\u{1f171}\u{1f17e}-\u{1f17f}\u{1f18e}\u{3030}\u{2b50}\u{2b55}\u{2934}-\u{2935}\u{2b05}-\u{2b07}\u{2b1b}-\u{2b1c}\u{3297}\u{3299}\u{303d}\u{00a9}\u{00ae}\u{2122}\u{23f3}\u{24c2}\u{23e9}-\u{23ef}\u{25b6}\u{23f8}-\u{23fa}]/u)) {
              return `<span class="emoji-sparkle">${part}</span>`;
            }
            return part;
          }).join('');
          heading.innerHTML = newText;
        }
      });
    };

    window.addEventListener('scroll', handleScroll);
    handleScroll(); // Initial call
    
    // Apply animations with a delay
    setTimeout(() => {
      addSparkleToEmojis();
    }, 1000);

    return () => {
      window.removeEventListener('scroll', handleScroll);
      if (scrollIndicator.parentNode) {
        document.body.removeChild(scrollIndicator);
      }
    };
  }, []);

  // Add section to refs for animation
  const addToRefs = (el) => {
    if (el && !sectionRefs.current.includes(el)) {
      sectionRefs.current.push(el);
    }
  };

  return (
    <div className="container">
      <header>
        <h1><span className="animated-brain">üß†</span> –ü—Å–∏—Ö–æ–ª–æ–≥ –¥–ª—è —Ç—Ä–µ–≤–æ–∂–Ω—ã—Ö –ª—é–¥–µ–π</h1>
        <p>
          <strong>–£–∑–Ω–∞–µ—à—å —Å–µ–±—è?</strong>
        </p>
        <ul className="header-list">
          <li>–ß–∞—Å—Ç–æ —Ç—Ä–µ–≤–æ–∂–∏—à—å—Å—è –∏ –ø–µ—Ä–µ–∂–∏–≤–∞–µ—à—å –æ–±–æ –≤—Å—ë–º</li>
          <li>–° —É—Ç—Ä–∞ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –ø–æ—Ç–æ–∫ –±–µ—Å–ø–æ–∫–æ–π–Ω—ã—Ö –º—ã—Å–ª–µ–π</li>
          <li>–í–Ω—É—Ç—Ä–∏ –æ—â—É—â–µ–Ω–∏–µ –±–µ—Å–ø–æ–º–æ—â–Ω–æ—Å—Ç–∏ –∏ —Ç—Ä—É–¥–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è</li>
        </ul>
        <p>
          <strong>–Ø —Å–∞–º–∞ –∑–Ω–∞—é, –∫–∞–∫–æ–≤–æ —ç—Ç–æ ‚Äî –∂–∏—Ç—å —Å —Ç—Ä–µ–≤–æ–≥–æ–π.</strong> –ü–æ—ç—Ç–æ–º—É –º–Ω–µ –≤–∞–∂–Ω–æ –Ω–µ —Ç–æ–ª—å–∫–æ –¥–∞–≤–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –Ω–æ –∏ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ç—ë–ø–ª–æ–µ, –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ, –≥–¥–µ –º–æ–∂–Ω–æ –±—ã—Ç—å —Å–æ–±–æ–π, —Ä–∞—Å—Å–ª–∞–±–∏—Ç—å—Å—è –∏ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –æ–ø–æ—Ä—É.
        </p>
        <Link href="https://t.me/psyrebt" target="_blank" className="btn">
          –ó–∞–ø–∏—Å–∞—Ç—å—Å—è
        </Link>
      </header>

      <section className="section two-col" ref={addToRefs}>
        <div>
          <h2>üë©‚Äç‚öïÔ∏è –ö—Ç–æ —è</h2>
          <div className="photo-container">
            <div className="sparkle"></div>
            <div className="sparkle"></div>
            <div className="sparkle"></div>
            <div className="sparkle"></div>
            <Image 
              src="/images/psychologist/photo.jpg" 
              alt="–ü—Å–∏—Ö–æ–ª–æ–≥ –ê–Ω–∞—Å—Ç–∞—Å–∏—è" 
              width={300}
              height={300}
              className="profile-photo"
              priority
            />
          </div>
          <p>
            –Ø ‚Äî –ê–Ω–∞—Å—Ç–∞—Å–∏—è, –ø—Å–∏—Ö–æ–ª–æ–≥ –≤ –†–≠–ü–¢ –∏ –ö–ü–¢ –ø–æ–¥—Ö–æ–¥–∞—Ö. –†–∞–±–æ—Ç–∞—é —Å —Ç–µ–º–∏, –∫—Ç–æ —É—Å—Ç–∞–ª —Ç—Ä–µ–≤–æ–∂–∏—Ç—å—Å—è, –±—ã—Ç—å &quot;–∏–¥–µ–∞–ª—å–Ω–æ–π&quot; –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∏—Å–ø—ã—Ç—ã–≤–∞—Ç—å —Å—Ç—Ä–µ—Å—Å.
          </p>
          <p>
            –ú–æ—è –∑–∞–¥–∞—á–∞ ‚Äî –ø–æ–º–æ—á—å —Ç–µ–±–µ –Ω–∞—É—á–∏—Ç—å—Å—è –±—ã—Ç—å –≤ –∫–æ–Ω—Ç–∞–∫—Ç–µ —Å —Å–æ–±–æ–π, —Å —É–≤–∞–∂–µ–Ω–∏–µ–º –∏ –±–µ–∑ —Å–∞–º–æ–∫—Ä–∏—Ç–∏–∫–∏.
          </p>
        </div>
        <div className="box">
          <h3>üí° –ú–æ–π —Å—Ç–∏–ª—å:</h3>
          <ul>
            <li>–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∞</li>
            <li>–Æ–º–æ—Ä, –Ω–æ –ø–æ –¥–µ–ª—É</li>
            <li>–ì–ª—É–±–∏–Ω–∞ + –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏</li>
            <li>–ó–∞–±–æ—Ç–∞ –∏ –≤–Ω–∏–º–∞–Ω–∏–µ –∫ –¥–µ—Ç–∞–ª—è–º</li>
          </ul>
        </div>
      </section>

      <section className="section" ref={addToRefs}>
        <h2>üìã –° —á–µ–º —è —Ä–∞–±–æ—Ç–∞—é</h2>
        <div className="two-col">
          <ul>
            <li>–ü–æ–≤—ã—à–µ–Ω–Ω–∞—è —Ç—Ä–µ–≤–æ–∂–Ω–æ—Å—Ç—å –∏ –û–ö–†</li>
            <li>–ü–∞–Ω–∏—á–µ—Å–∫–∏–µ –∞—Ç–∞–∫–∏ –∏ –í–°–î</li>
            <li>–ü—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏—è –∏ —Å–∞–º–æ—Å–∞–±–æ—Ç–∞–∂</li>
            <li>–í—ã–≥–æ—Ä–∞–Ω–∏–µ, —É—Å—Ç–∞–ª–æ—Å—Ç—å, –±–µ—Å—Å–∏–ª–∏–µ</li>
          </ul>
          <ul>
            <li>–ù–µ–ø—Ä–∏–Ω—è—Ç–∏–µ –≤–Ω–µ—à–Ω–æ—Å—Ç–∏, –ø–µ—Ä—Ñ–µ–∫—Ü–∏–æ–Ω–∏–∑–º</li>
            <li>–°—Ç—Ä–∞—Ö –±—ã—Ç—å &quot;–Ω–µ —Ç–∞–∫–æ–π&quot;</li>
            <li>–°–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏—è—Ö, –æ–±—Å–µ—Å—Å–∏–∏</li>
            <li>–û–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ, —Å–æ—Ü–∏–∞–ª—å–Ω–∞—è —Ç—Ä–µ–≤–æ–≥–∞</li>
          </ul>
        </div>
      </section>

      <section className="section box" ref={addToRefs}>
        <h2>üí¨ –ö–∞–∫ –ø—Ä–æ—Ö–æ–¥—è—Ç —Å–µ—Å—Å–∏–∏</h2>
        <ul>
          <li>–û–Ω–ª–∞–π–Ω –≤ Google Meet, 45 –º–∏–Ω—É—Ç</li>
          <li>–°—Ç–æ–∏–º–æ—Å—Ç—å: 40 EUR</li>
          <li>–ú–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ –Ω–µ–¥–µ–ª–∏ (–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏)</li>
          <li>–°–µ—Å—Å–∏–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç 1 —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é</li>
          <li>–î–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è –∏ —Ä–∞–±–æ—Ç–∞ –º–µ–∂–¥—É –≤—Å—Ç—Ä–µ—á–∞–º–∏ ‚Äî –∫–∞–∫ —á–∞—Å—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–∞</li>
        </ul>
        <h3 style={{ marginTop: '24px' }}>–ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —è:</h3>
        <ul>
          <li>üí¨ –ì–æ–≤–æ—Ä—é –Ω–∞ –ø—Ä–æ—Å—Ç–æ–º —è–∑—ã–∫–µ ‚Äî –±–µ–∑ –≤–æ–¥—ã –∏ —ç–∑–æ—Ç–µ—Ä–∏–∫–∏</li>
          <li><span className="animated-brain">üß†</span> –î–∞—é –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å–Ω–æ–π –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏</li>
          <li>ü§ù –° —Ç–µ–ø–ª–æ–º, –Ω–æ –Ω–µ —Ä–∞–∑–º–∞–∑—ã–≤–∞–µ–º —Å–æ–ø–ª–∏ ‚Äî –ø–æ–¥–¥–µ—Ä–∂—É –∏ –ø–æ–¥—Å–∫–∞–∂—É, –∫–∞–∫ –¥–≤–∏–≥–∞—Ç—å—Å—è</li>
        </ul>
      </section>

      <section className="section" ref={addToRefs}>
        <h2>üéì –û–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ –æ–ø—ã—Ç</h2>
        <div className="two-col">
          <div className="box">
            <div className="logo-wrapper">
              <Image 
                src="/images/psychologist/uos-logo.png" 
                alt="University of Sunderland" 
                width={250}
                height={70}
                className="logo-img"
                style={{ objectFit: 'contain', width: '100%', height: 'auto' }}
                priority
              />
              <h3>University of Sunderland</h3>
            </div>
            <p>–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –º–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä—ã –ø–æ –ø—Å–∏—Ö–æ–ª–æ–≥–∏–∏</p>
          </div>
          <div className="box">
            <div className="logo-wrapper">
              <Image 
                src="/images/psychologist/arden-logo.png" 
                alt="Arden University" 
                width={250}
                height={70}
                className="logo-img"
                style={{ objectFit: 'contain', width: '100%', height: 'auto' }}
                priority
              />
              <h3>Arden University</h3>
            </div>
            <p>
              –ú–∞–≥–∏—Å—Ç—Ä–∞—Ç—É—Ä–∞ —Å –∞–∫–∫—Ä–µ–¥–∏—Ç–∞—Ü–∏–µ–π <strong>BPS</strong>: —É—á–µ–±–Ω–∞—è —á–∞—Å—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–∞, –ø–∏—à—É –¥–∏—Å—Å–µ—Ä—Ç–∞—Ü–∏—é –∏ –ø—Ä–æ–≤–æ–∂—É –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
            </p>
          </div>
          <div className="box">
            <div className="logo-wrapper">
              <Image 
                src="/images/psychologist/bps-logo.png" 
                alt="BPS Logo" 
                width={250}
                height={70}
                className="logo-img"
                style={{ objectFit: 'contain', width: '100%', height: 'auto' }}
                priority
              />
              <h3>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ</h3>
            </div>
            <ul>
              <li>–ß–ª–µ–Ω <strong>British Psychological Society (BPS)</strong></li>
              <li>–û–±—É—á–µ–Ω–∏–µ –≤ –ø–æ–¥—Ö–æ–¥–∞—Ö –†–≠–ü–¢ –∏ –ö–ü–¢</li>
              <li>–û–Ω–ª–∞–π–Ω-–ø—Ä–∞–∫—Ç–∏–∫–∞ —Å 2023 –≥–æ–¥–∞</li>
              <li>–†–µ–≥—É–ª—è—Ä–Ω—ã–µ —Å—É–ø–µ—Ä–≤–∏–∑–∏–∏ –∏ –∏–Ω—Ç–µ—Ä–≤–∏–∑–∏–∏</li>
            </ul>
          </div>
        </div>
      </section>

      <section className="section" ref={addToRefs}>
        <h2>üì© –ö–æ–Ω—Ç–∞–∫—Ç—ã</h2>
        <p>–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –º–æ–∂–Ω–æ –≤ Telegram:</p>
        <a href="https://t.me/psyrebt" target="_blank" className="link">
          @psyrebt
        </a>
        <p style={{ fontSize: '14px', color: '#6b7280' }}>
          –û–±—ã—á–Ω–æ –æ—Ç–≤–µ—á–∞—é –≤ —Ç–µ—á–µ–Ω–∏–µ 24 —á–∞—Å–æ–≤
        </p>
      </section>

      <section className="section box" ref={addToRefs}>
        <h2>‚ú® –ß—Ç–æ –≥–æ–≤–æ—Ä—è—Ç –∫–ª–∏–µ–Ω—Ç—ã</h2>
        <blockquote>
          &quot;–ü–æ—Å–ª–µ —Å–µ—Å—Å–∏–π —Å —Ç–æ–±–æ–π —Å—Ç–∞–ª–æ —Å–ø–æ–∫–æ–π–Ω–µ–µ –≤–Ω—É—Ç—Ä–∏. –ö–∞–∫ –±—É–¥—Ç–æ —Ç—Ä–µ–≤–æ–≥–µ –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –∫—Ä–∏—á–∞—Ç—å, —á—Ç–æ–±—ã –µ—ë —É—Å–ª—ã—à–∞–ª–∏.&quot;
        </blockquote>
        <blockquote>
          &quot;–ö–ª–∞—Å—Å–Ω–æ, –∫–∞–∫ –º–æ–∂–Ω–æ –≤ –æ–¥–Ω–æ–º —Ä–∞–∑–≥–æ–≤–æ—Ä–µ –ø–æ—á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å —Å–µ–±—è –∏ –ø—Ä–∏–Ω—è—Ç–æ–π, –∏ –ø–æ–ª—É—á–∏—Ç—å —á–µ—Ç–∫–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∫ –¥–µ–π—Å—Ç–≤–∏—é.&quot;
        </blockquote>
      </section>
    </div>
  );
}
